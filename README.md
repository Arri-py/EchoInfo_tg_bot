# EchoInfo_tg_bot

Телеграм-бот на aiogram 3, который по команде возвращает максимум доступной информации о пользователях, группах, каналах и форумных топиках. Бот не хранит данные и работает только через Telegram Bot API.

## Возможности
- `/start` в личке — краткая инструкция.
- `/info` в личке — все поля `User` (premium/scam/fake/support, возможности inline, т.д.).
- `/info` в группе/супергруппе — данные чата, права по умолчанию, админы, количество участников, настройки защиты, форумный режим.
- `/info` в канале — аналогично группам.
- Форумы: если вызвать `/info` внутри топика, бот покажет `message_thread_id`, название и иконку ветки.
- Глобальный обработчик ошибок: бот не падает, шлет владельцу уведомление и перезапускает polling.

## Быстрый старт (локально)
Требуется Python 3.12+.
```bash
# 1) создать .env
cp .env.example .env          # отредактируйте BOT_TOKEN и OWNER_ID

# 2) установить зависимости
pip install -r requirements.txt

# 3) запустить
python bot.py
```

## Переменные окружения
- `BOT_TOKEN` — токен Telegram бота (обязательно).
- `OWNER_ID` — Telegram ID владельца для уведомлений об ошибках (рекомендуется).

## Docker
```bash
DOCKER_BUILDKIT=1 docker build -t echo-info-bot .
docker run --rm -e BOT_TOKEN=xxx -e OWNER_ID=123 echo-info-bot
```

## Docker Compose
```bash
docker compose up --build -d
```
`docker-compose.yml` использует `.env` и настроен на автоперезапуск (`restart: unless-stopped`).

## Поведение при ошибках
- Любое необработанное исключение логируется.
- Владельцу (`OWNER_ID`) отправляется сообщение: время (UTC), тип и текст ошибки, короткое превью update.
- Polling автоматически перезапускается через 5 секунд.

## Структура проекта
```
bot.py               # основной код бота
requirements.txt     # зависимости
Dockerfile           # сборка контейнера
docker-compose.yml   # удобный запуск в контейнере
.env.example         # шаблон переменных окружения
.gitignore
```

## Полезно знать
- Бот не умеет перечислять все топики форума: Bot API это не позволяет, поэтому команду нужно вызывать внутри нужной ветки.
- В группах/каналах список админов и счетчик участников может быть недоступен, если у бота нет прав.
